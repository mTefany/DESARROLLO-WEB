{% extends 'base.html' %}
{% block title %} Promedio movil {% endblock %}
{% block content %}
{% if imagen %}
<center>
    <br><br>
    <h4 style="font-family:monospace;"><strong>Grafica de los resultados</strong></h4>
    <hr>
</center>
<h3 style="font-family:monospace;"><i class="bi bi-app-indicator"></i> Datos Obtenidos</h3>
<hr>
<br>
<div class="card cards">
    <div class="card-body">
        <table class="dataTable table table-bordered table-hover">
            <thead>
                {% for i in datos.columns %}
                <th>{{ i }}</th>
                {% endfor %}
            </thead>
            <tbody>
                {% for i in datos.iterrows() %}
                <tr>
                    <td>{{ i[1][0] }}</td>
                    <td>{{ i[1][1] }}</td>
                    <td>{{ i[1][2] }}</td>
                    <td>{{ i[1][3] }}</td> 
                    <td>{{ i[1][4] }}</td>
                    <td>{{ i[1][5] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
<br><br>
<hr>
<h3 style="font-family:monospace;"><i class="bi bi-bar-chart-line"></i> Grafica de los datos Obtenidos</h3>
<hr>
<br>
<div class="card cards  mb-3">
    <img src="data:image/png;base64,{{imagen}}" class="img-fluid rounded-start" alt="grafica">
    <div class="card cards text-center ">
        <div class="card-header" style="font-family: 'Lucida Sans';">
            <h5>Grafica de Promedio Movil </h5>
        </div>
        <div class="card-body">
            <p class="card-text">La media movil 3 es {{mediaMovil3}} y la media movil 4 es {{mediaMovil4}}</p>
        </div>
    </div>
</div>
{% else %}
<br><br>
<center>
    <h4 style="font-family:monospace;"><strong>Promedio Movil</strong></h4>
    <hr>
    {% if error %}
    <div class="alert alert-success" role="alert">
        {{ error }}
    </div>
    {% endif %}
    <br><br><br><br>
    <div class="card" style="width: 40rem;">
        <div class="card-body">
            <form action="/promedioMovil" method="POST">
                <div class="mb-3">
                    <input type="text"  class="form-control"  placeholder="Nombre del eje X" name="xlbl">
                </div>
                <div class="mb-3">
                    <textarea  name="x"   rows="3"  class="form-control"  placeholder="Datos del eje X (solo numeros seperados por , )" ></textarea>
                </div>
                <div class="mb-3">
                    <input  type="text"   class="form-control" placeholder="Nombre del eje Y"   name="ylbl" >
                </div>
                <div class="mb-3">
                    <textarea name="y"    rows="3" class="form-control" placeholder="Datos del eje Y (solo numeros seperados por , )"></textarea>
                </div>
                <button type="submit"  class="btn boton"  >Calcular</button>
            </form>
        </div>
    </div>
</center>
<br><br><br><br><br><br><br>
{% endif %}
{% endblock %}